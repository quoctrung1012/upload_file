<div class="h-100 container d-flex flex-column">
  <div class="d-flex justify-content-end pt-2">
    <button class="btn btn-sm btn-outline-primary" (click)="onVideo()">{{ 'action.video' | translate }}</button>
    <button class="btn btn-sm btn-outline-primary" (click)="onUpload()">{{ 'action.upload' | translate }}</button>
  </div>
  <div class="d-flex justify-content-end mt-2">
    <app-pagination
      #pagination
      [pageSize]="pageSize"
      [total]="total"
      (onLoad)="onChange($event)"
    ></app-pagination>
  </div>
  <div class="w-100 flex-grow-1 pt-2">
    <table class="table table-hover table-striped table-bordered file-upload" style="width: 100%; table-layout: fixed;">
      <colgroup>
        <col style="width: auto; min-width: 100px">
        <col style="width: 100px;">
        <col style="width: 160px;">
        <col style="width: 80px;">
        <col style="width: calc(78px * 3);">
      </colgroup>
      <thead class="thead-light">
      <tr>
        <th>{{'upload.list.name' | translate}}</th>
        <th class="text-end">{{'upload.list.size' | translate}}</th>
        <th class="text-end">{{'upload.list.creationDate' | translate}}</th>
        <th class="text-center">{{'upload.list.type' | translate}}</th>
        <th class="text-center">{{'action.name' | translate}}</th>
      </tr>
      </thead>
      <tbody *ngIf="uploadFiles.length > 0">
        @for (item of uploadFiles; track item.id) {
          <tr>
            <td>{{ item.name }}</td>
            <td class="text-end">{{ item.size | fileSize }}</td>
            <td class="text-end" title="{{ item.creationDate | date: 'dd/MM/yyyy hh:mm a zzzz' }}">{{ item.creationDate | date: 'dd/MM/yyyy hh:mm' }}</td>
            <td class="file">
              <div class="file-icon">
                <div [ngClass]="item.type | fileIcon" class="icon-type"></div>
              </div>
            </td>
            <td>
              <div class="d-flex justify-content-between px-2">
                <button class="btn btn-sm btn-outline-danger" (click)="onDelete(item)">{{ 'action.delete' | translate }}</button>
                <button class="btn btn-sm btn-outline-info" (click)="onView(item)">{{ 'action.view' | translate }}</button>
                <button class="btn btn-sm btn-outline-info" (click)="onDownload(item)">{{ 'action.download' | translate }}</button>
              </div>
            </td>
          </tr>
        }
      </tbody>
      <tbody *ngIf="uploadFiles.length === 0">
      <tr>
        <th colspan="5" class="text-center">{{'Không có file upload nào!' | translate}}</th>
      </tr>
      </tbody>
    </table>
  </div>
</div>
<app-toast #toastTpl></app-toast>
<app-upload-file-create #createFileTpl (onLoad)="pagination.onLoadGrid()"></app-upload-file-create>
<app-upload-file-view #viewFileTpl></app-upload-file-view>
